<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Career Discovery Hub</title>
  <link rel="icon" type="image/png" href="favicon.png" />
  <link rel="stylesheet" href="styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body>

  <!-- HERO SECTION -->
  <section class="hero">
    <div class="hero-content">
      <img src="favicon.png" alt="Career Discovery Hub Logo" class="hero-image" />
      <div class="hero-text">
        <h1>Career Discovery Hub</h1>
        <p>Discover your perfect career path with AI-powered personality and skills assessment</p>
      </div>
    </div>
  </section>

  <!-- GOOGLE FORM -->
  <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSc1HGinP0S3pKIka7eYu5mruQtpWg_2p4XJ6u_7eBv1fJsGtg/viewform?embedded=true"
          width="100%" height="800" frameborder="0" marginheight="0" marginwidth="0">Loadingâ€¦</iframe>

  <!-- AUTHENTICATION FORM -->
  <div class="card" id="auth-section">
    <h2>ğŸ” View My Career Report</h2>
    <p>Enter your name and email to access your personalized report:</p>
    <input type="text" id="input-name" placeholder="Your Name" />
    <input type="email" id="input-email" placeholder="Your Email" />
    <button id="view-report-btn" class="btn">View My Report</button>
    <p id="auth-error" style="color: red; margin-top: 10px;"></p>
  </div>

  <!-- CAREER REPORT CARD -->
  <div class="card" id="career-card" style="display: none;"></div>

  <!-- HIDE REPORT BUTTON -->
  <button id="hide-report-btn" style="display: none;">ğŸ”’ Hide My Report</button>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const nameInputEl = document.getElementById("input-name");
      const emailInputEl = document.getElementById("input-email");
      const errorBox = document.getElementById("auth-error");
      const authSection = document.getElementById("auth-section");
      const careerCard = document.getElementById("career-card");
      const hideBtn = document.getElementById("hide-report-btn");

      const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzamUnnfLq9V2EMNcLIl92I_UofA3AGwKRT-e8t1zcfoR0FHyl-pJymMWJVddyam9nW/exec";

      // View Report
      document.getElementById("view-report-btn").addEventListener("click", async () => {
        const name = nameInputEl.value.trim().toLowerCase();
        const email = emailInputEl.value.trim().toLowerCase();

        if (!name || !email) {
          errorBox.textContent = "âš ï¸ Please enter both name and email.";
          return;
        }

        try {
          const response = await fetch(`${SCRIPT_URL}?name=${encodeURIComponent(name)}&email=${encodeURIComponent(email)}`);
          const data = await response.json();

          if (data.error || !data["Name"] || !data["Email"]) {
            errorBox.textContent = "âŒ No matching report found. Please check your name and email.";
            return;
          }

          errorBox.textContent = "";
          authSection.style.display = "none";
          showReport(data);

        } catch (err) {
          errorBox.textContent = "âŒ Failed to fetch report. Please check your internet or try again.";
          console.error(err);
        }
      });

      // Show report function
      function showReport(data) {
        careerCard.innerHTML = `
          <h2>ğŸ“‡ Career Identity Card</h2>
          <div class="section"><strong>ğŸ‘¤ Name:</strong> ${data["Name"]}</div>
          <div class="section"><strong>ğŸ“ Education Level:</strong> ${data["Education Level"]}</div>

          <div class="section-title">ğŸ¯ Top 2 RIASEC Types</div>
          <div class="section">1. <strong>${data["riasec_type_1"]}</strong> â€“ ${data["riasec_type_1_explanation"]}</div>
          <div class="section">2. <strong>${data["riasec_type_2"]}</strong> â€“ ${data["riasec_type_2_explanation"]}</div>

          <div class="section-title">ğŸ§  Personality Summary</div>
          <div class="section"><strong>Openness:</strong> ${data["openness_summary"]}</div>
          <div class="section"><strong>Conscientiousness:</strong> ${data["conscientiousness_summary"]}</div>
          <div class="section"><strong>Extraversion:</strong> ${data["extraversion_summary"]}</div>
          <div class="section"><strong>Agreeableness:</strong> ${data["agreeableness_summary"]}</div>
          <div class="section"><strong>Neuroticism:</strong> ${data["neuroticism_summary"]}</div>

          <div class="section-title">ğŸ’¡ Top Motivators</div>
          <div class="section">ğŸš€ <strong>${data["motivator_1"]}</strong> â€“ ${data["motivator_1_description"]}</div>
          <div class="section">ğŸ–ï¸ <strong>${data["motivator_2"]}</strong> â€“ ${data["motivator_2_description"]}</div>

          <div class="section-title">ğŸ› ï¸ Skills & Readiness</div>
          <div class="section"><strong>Technical Skills:</strong> ${data["technical_skills"]}</div>
          <div class="section"><strong>Soft Skills:</strong> ${data["soft_skills"]}</div>
          <div class="section">ğŸ” Best Fit Context: ${data["Skills Summary"]}</div>

          <div class="section-title">ğŸ’¼ Career Matches</div>
          <div class="section">âœ… ${data["career_1"]} â€“ ${data["career_1_explanation"]}</div>

          <div class="section-title">ğŸ“š Learning Suggestions</div>
          <div class="section">ğŸ“˜ ${data["course_1"]} â€“ ${data["course_1_reason"]}</div>
        `;
        careerCard.style.display = "block";
        hideBtn.style.display = "block";
      }

      // Hide report
      hideBtn.addEventListener("click", () => {
        careerCard.style.display = "none";
        careerCard.innerHTML = "";
        hideBtn.style.display = "none";
        authSection.style.display = "block";
        nameInputEl.value = "";
        emailInputEl.value = "";
        errorBox.textContent = "";
      });
    });
  </script>

</body>
</html>
